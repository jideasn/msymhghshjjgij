<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE mapper PUBLIC
"-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="qna">

<select id="qnaList" parameterType="PageNumber" resultType="Market_qna">
	<![CDATA[
	select * from (select rownum rnum, market_qna_no, market_qna_title, member_id,market_qna_question_date from market_qna 
	where market_no=#{market_no} order by market_qna_no desc) where rnum >=#{startRow} and rnum <=#{endRow}
	
	]]>

</select>
	
	<select id="qnaCount" parameterType="int" resultType="int">
		select count(*) from market_qna where market_no = #{market_no}
	</select>
	<select id="selectQna" parameterType="int" resultType="Market_qna">
		select * from market_qna where market_qna_no = #{qna_no}
	</select>
	
<select id="mainQnaList" parameterType="PageNumber" resultType="MainQna">
	<![CDATA[
	select * from (select rownum rnum, main_qna_no, main_qna_title, member_id,main_qna_date from main_qna 
	order by main_qna_no desc) where rnum >=#{startRow} and rnum <=#{endRow}
	
	]]>

</select>
<select id="mainQnaCount" parameterType="int" resultType="int">
		select count(*) from main_qna
	</select>
	
	<select id="mainQnaDetail" parameterType="int" resultType="MainQna">
	select * from main_qna where main_qna_no = #{main_qna_no}
	</select>
	
	<update id="updateAnswer" parameterType="MainQna" >
	update main_qna set main_qna_answer =#{main_qna_answer} where main_qna_no= #{main_qna_no}
	</update>
	
	<delete id="deleteQnaAnswer" parameterType="int" flushCache="true">
	delete from main_qna where main_qna_no = #{qanswer_no}
	</delete>
	
	<insert id="insertMainQna" parameterType="MainQna" flushCache="true" useGeneratedKeys="true" >
	
	<![CDATA[
	insert into main_qna values((select max(main_qna_no)+1 from main_qna),#{member_id},#{main_qna_title},
	#{main_qna_contents},sysdate, null, null)
	]]>  
	</insert>
	
	
	<update id="updateMainQna" parameterType="MainQna">
	update main_qna set main_qna_title =#{main_qna_title}, main_qna_contents =#{main_qna_contents} where main_qna_no = #{main_qna_no}
	</update>
</mapper>
